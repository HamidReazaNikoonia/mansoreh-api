<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title><%=appName%> || Books</title>
		<meta name="description" content="3D Book Showcase with CSS 3D Transforms" />
		<meta name="keywords" content="3d transforms, css3 3d, book, jquery, open book, css transitions" />
		<meta name="author" content="Codrops" />
		<link rel="shortcut icon" href="../favicon.ico"> 
		<link rel="stylesheet" type="text/css" href="<%=server%>/static/css/default.css" />
		<link rel="stylesheet" type="text/css" href="<%=server%>/static/css/component_book.css" />
		<script src="<%=server%>/static/js/modernizr.custom.js"></script>
		<style type="text/css">
			body.sticky-header {
  padding-top: 100px;
}
body.sticky-header #header {
  height: 60px;
  background-color: rgba(52, 152, 219, 0.9);
}
body.sticky-header #header h1 {
  -moz-transform: scale(0, 0);
  -ms-transform: scale(0, 0);
  -webkit-transform: scale(0, 0);
  transform: scale(0, 0);
}


#header {
  width: 100%;
  height: 300px;
  background-color: #3498db;
  text-align: center;
  position: relative;
  z-index: 9999;
  position: fixed;
  top: 0;
  overflow: hidden;
  -moz-transition: all 0.5s ease;
  -o-transition: all 0.5s ease;
  -webkit-transition: all 0.5s ease;
  transition: all 0.5s ease;
}
#header h1 {
  font-size: 90px;
  color: #fff;
  line-height: 230px;
  text-transform: uppercase;
  font-weight: 100;
  -moz-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
  -webkit-transition: all 0.3s ease;
  transition: all 0.3s ease;
}

@media only screen and (max-width:1100px) {
	#header h1 {
		font-size: 70px;
	}
}

@media only screen and (max-width:850) {
	#header h1 {
		font-size: 45px;
	}
}

@media only screen and (max-width:630px) {
	#header h1 {
		font-size: 30px;
	}
}


#header nav {
  position: absolute;
  bottom: 0;
  height: 60px;
  line-height: 60px;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.1);
}
#header nav a {
  color: #fff;
  display: inline-block;
	margin-right:12px;
  padding: 10px 15px;
  line-height: 1;
  text-decoration: none;
  -moz-border-radius: 2px;
  -webkit-border-radius: 2px;
  border-radius: 2px;
}
#header nav a:hover {
  -moz-box-shadow: 0 0 0 1px #fff;
  -webkit-box-shadow: 0 0 0 1px #fff;
  box-shadow: 0 0 0 1px #fff;
}

h2 {
  font-size: 34px;
  text-transform: uppercase;
  font-weight: 100;
  line-height: 2;
  color: #2c3e50;
}

p {
  margin-bottom: 2rem;
  line-height: 2;
  color: #7f8c8d;
}

.wrapper {
  width: 800px;
  margin: 0 auto;
}

section {
  padding: 20px;
  margin-bottom: 40px;
  background-color: #fff;
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px;
  -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
}

body {
  background-color: #ecf0f1;
  font-family: helvetica, arial, sans-serif;
  font-size: 16px;
  padding-top: 330px;
  -moz-transition: padding-top 0.5s ease;
  -o-transition: padding-top 0.5s ease;
  -webkit-transition: padding-top 0.5s ease;
  transition: padding-top 0.5s ease;
}

#clearfix {
	padding-bottom: 9rem;
}

   .app_name {
		 font-weight:bolder;
		 color: #08122f;
	 }

.active {
	color: #12299c !important;
	 -webkit-box-shadow: 0 0 0 1px #fff;
    box-shadow: 0 0 0 1px #fff;
}
		</style>
	</head>
	<body>
		<header id="header">
    <h1>"<span class="app_name">  <%= appName%></span>  Books "</h1>
    <nav id="category">
			<a class="active" href="#">ALL</a>
      <a href="#">IELTES</a>
      <a href="#">TOFEL</a>
    </nav>
  </header>
		<div class="container" style="padding-top:100px">	
			
			<header id="clearfix" class="clearfix">
				<h1><span class="app_name">  <%= appName%></span> English Books and Documents</h1>
				<span class="support-note">best english books and docuemtns in the world</span>
			</header>

			<div class="main">
				<ul id="bk-list" class="bk-list clearfix">
					

<!--
					<li>
						<div class="bk-book book-1 bk-bookdefault">
							<div class="bk-front">
								<div class="bk-cover-back"></div>
								<div class="bk-cover">
								</div>
							</div>
							<div class="bk-page">
								
								@if(!empty($book->details_1))

								<div class="bk-content bk-content-current">
									<p>{{ $book->details_1 }}</p>
								</div>

								@endif

								@if(!empty($book->details_2))

								<div class="bk-content">
									<p>{{ $book->details_2 }}</p>
								</div>

								@endif

								@if(!empty($book->details_3))

								<div class="bk-content">
									<p>{{ $book->details_3 }}</p>
								</div>

								@endif


								<div class="bk-content">
									<p>Whale catfish leatherjacket deep sea anglerfish grenadier sawfish pompano dolphinfish carp large-eye bream, squeaker amago. Sandroller; rough scad, tiger shovelnose catfish snubnose parasitic eel? Black bass soldierfish duckbill--Rattail Atlantic saury Blind shark California halibut; false trevally warty angler!</p>
								</div>


								<div class="bk-content">
									<p>Trahira giant wels cutlassfish snapper koi blackchin mummichog mustard eel rock bass whiff murray cod. Bigmouth buffalo ling cod giant wels, sauger pink salmon. Clingfish luderick treefish flatfish Cherubfish oldwife Indian mul gizzard shad hagfish zebra danio. Butterfly ray lizardfish ponyfish muskellunge Long-finned sand diver mullet swordfish limia ghost carp filefish.</p>
								</div>
							</div>
							<div class="bk-back">
								<p>{{ $book->short_details }}</p>
							</div>
							<div class="bk-right"></div>
							<div class="bk-left">
								<h2>
									<span>{{ $book->name }}</span>
									<span>{{ $book->author }}</span>
								</h2>
							</div>
							<div class="bk-top"></div>
							<div class="bk-bottom"></div>
						</div>
						<div class="bk-info">
							<button class="bk-bookback">Flip</button>
							<button class="bk-bookview">View inside</button>
							<h3>
								<span>{{ $book->author }}</span>
								<span>{{ $book->name }}</span>
							</h3>
							<p>{{ $book->short_details }}</p>
						</div>
					</li>

					-->


				</ul>
			</div>
		</div><!-- /container -->
		<script src="<%=server%>/static/js/jquery.min.js"></script>
		<script src="<%=server%>/static/js/books1.js"></script>
		<script>
		

			$(function(){
  $(window).scroll(function(){
    var winTop = $(window).scrollTop();
    if(winTop >= 30){
      $("body").addClass("sticky-header");
    }else{
      $("body").removeClass("sticky-header");
    }//if-else
  });//win func.
});//ready func.



$("#category a").click(function(e) {
  e.preventDefault();
	var categoryContent = $(this).text();
	filterBooks(categoryContent);
	$('#category a').removeClass('active');
	$(this).addClass('active');
})

var books = [];

function filterBooks(category) {
	switch(category) {
		case 'TOFEL':
			$('li[data-category]').css({display: 'none'});
			$('li[data-category="tofel"]').css({display: 'list-item'})
			break;
    case 'IELTES':
			$('li[data-category]').css({display: 'none'});
			$('li[data-category="ielts"]').css({display: 'list-item'});
			break;
		case 'ALL':
    	$('li[data-category]').css({display: 'list-item'});
			break;
		default:
			$('li[data-category]').css({display: 'list-item'});
    	break;
	}
}

     
      function getBooks() {
         $.ajax({
             type:'GET',
             url: '<%=server%>/v1/books',
             success: function(res) {
                 console.log('res');
                 console.log(res);
                 if(res.books) {
                     books = res.books;
                     console.log(res.books);
                     generateView();
                 }
             },
             error: function(err) {
                 console.log(err);
             }
         })
      }


      function generateView() {
          var books_html = [];
          books.forEach(function(item) {
              var template = `<li data-category="${item.category}">
						<div class="bk-book book-1 bk-bookdefault">
							<div class="bk-front">
								<div class="bk-cover-back"></div>
								<div class="bk-cover">
								${ item.cover.image ? `<img src="<%=server%>/file/${item.cover.image.file_name}" />` : '' }
								</div>
							</div>

							<div class="bk-page">
								
								${ item.demo_page[0] ? `<div class="bk-content bk-content-current"><p>${item.demo_page[0] }</p></div>` : '' }
								${ item.demo_page[1] ? `<div class="bk-content "><p>${item.demo_page[1] }</p></div>` : '' }
								${ item.demo_page[2] ? `<div class="bk-content "><p>${item.demo_page[2] }</p></div>` : '' }
							</div>

							<div class="bk-back">
								<p>${item.details !== "" ? item.details : item.short_details}</p>
							</div>


							<div class="bk-right"></div>


							<div class="bk-left">
								<h2>
									<span>${ item.name }</span>
									<span>${ item.author }</span>
								</h2>
							</div>


							<div class="bk-top"></div>
							<div class="bk-bottom"></div>

						</div>

						<div class="bk-info">
							<button class="bk-bookback">Flip</button>
							<button class="bk-bookview">View inside</button>
							<button class="bk-download">
							  <a download href="<%=server%>/file/${item.file_url.file_name}" >
								download
								</a>
							</button>
							<h3>
								<span>${ item.author }</span>
								<span>
									<a download href="<%=server%>/file/${item.file_url.file_name}" >
										${ item.name }
									</a>
								</span>
							</h3>
							<p>${item.short_details}</p>
						</div>
					</li>`;
             books_html.push(template);
          });

					$('.bk-list').empty();
          $('.bk-list').append(books_html);
					setTimeout(function() {
						Books.init();
					}, 100);
      }

      $(document).ready(async function() {
          await getBooks();
					
      })
		</script>
	</body>
</html>
